import{a as Ut,R as ve,r as x,g as Kt}from"../react-dom-ZcwTowb8.js";import{c as Yt,u as F,a as Te,b as Ft}from"./fiber-CMGEz6ZG.js";import{j as Bt,V as M,k as rt,l as at,m as Vt,n as Ht,o as Wt,p as Xt,q as Zt,E as Gt,r as W,s as X,Q as Be,P as ie,O as se,t as Ve,c as N,u as qt,T as He,v as we}from"../three-CmTvCILZ.js";var We={},Xe=Ut;We.createRoot=Xe.createRoot,We.hydrateRoot=Xe.hydrateRoot;function le(){return le=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)({}).hasOwnProperty.call(n,t)&&(o[t]=n[t])}return o},le.apply(null,arguments)}function $t(o,e,n){return Math.max(e,Math.min(o,n))}const D={toVector(o,e){return o===void 0&&(o=e),Array.isArray(o)?o:[o,o]},add(o,e){return[o[0]+e[0],o[1]+e[1]]},sub(o,e){return[o[0]-e[0],o[1]-e[1]]},addTo(o,e){o[0]+=e[0],o[1]+=e[1]},subTo(o,e){o[0]-=e[0],o[1]-=e[1]}};function Ze(o,e,n){return e===0||Math.abs(e)===1/0?Math.pow(o,n*5):o*e*n/(e+n*o)}function Ge(o,e,n,t=.15){return t===0?$t(o,e,n):o<e?-Ze(e-o,n-e,t)+e:o>n?+Ze(o-n,n-e,t)+n:o}function Qt(o,[e,n],[t,s]){const[[c,f],[r,l]]=o;return[Ge(e,c,f,t),Ge(n,r,l,s)]}function Jt(o,e){if(typeof o!="object"||o===null)return o;var n=o[Symbol.toPrimitive];if(n!==void 0){var t=n.call(o,e||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(o)}function en(o){var e=Jt(o,"string");return typeof e=="symbol"?e:String(e)}function k(o,e,n){return e=en(e),e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}function qe(o,e){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(o);e&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(o,s).enumerable})),n.push.apply(n,t)}return n}function O(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qe(Object(n),!0).forEach(function(t){k(o,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(n,t))})}return o}const ct={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function $e(o){return o?o[0].toUpperCase()+o.slice(1):""}const tn=["enter","leave"];function nn(o=!1,e){return o&&!tn.includes(e)}function on(o,e="",n=!1){const t=ct[o],s=t&&t[e]||e;return"on"+$e(o)+$e(s)+(nn(n,s)?"Capture":"")}const sn=["gotpointercapture","lostpointercapture"];function rn(o){let e=o.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const t=sn.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(t);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:n}}function an(o,e=""){const n=ct[o],t=n&&n[e]||e;return o+t}function fe(o){return"touches"in o}function lt(o){return fe(o)?"touch":"pointerType"in o?o.pointerType:"mouse"}function cn(o){return Array.from(o.touches).filter(e=>{var n,t;return e.target===o.currentTarget||((n=o.currentTarget)===null||n===void 0||(t=n.contains)===null||t===void 0?void 0:t.call(n,e.target))})}function ln(o){return o.type==="touchend"||o.type==="touchcancel"?o.changedTouches:o.targetTouches}function ut(o){return fe(o)?ln(o)[0]:o}function un(o){return cn(o).map(e=>e.identifier)}function ye(o){const e=ut(o);return fe(o)?e.identifier:e.pointerId}function Qe(o){const e=ut(o);return[e.clientX,e.clientY]}function fn(o){const e={};if("buttons"in o&&(e.buttons=o.buttons),"shiftKey"in o){const{shiftKey:n,altKey:t,metaKey:s,ctrlKey:c}=o;Object.assign(e,{shiftKey:n,altKey:t,metaKey:s,ctrlKey:c})}return e}function ue(o,...e){return typeof o=="function"?o(...e):o}function hn(){}function pn(...o){return o.length===0?hn:o.length===1?o[0]:function(){let e;for(const n of o)e=n.apply(this,arguments)||e;return e}}function Je(o,e){return Object.assign({},e,o||{})}const dn=32;class mn{constructor(e,n,t){this.ctrl=e,this.args=n,this.key=t,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:t,args:s}=this;n[t]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=s,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,t=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=t.from?ue(t.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:t,shared:s}=this;n.args=this.args;let c=0;if(e&&(n.event=e,t.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,fn(e)),s.down=s.pressed=s.buttons%2===1||s.touches>0,c=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const g=n._delta.map(Math.abs);D.addTo(n._distance,g)}this.axisIntent&&this.axisIntent(e);const[f,r]=n._movement,[l,d]=t.threshold,{_step:u,values:m}=n;if(t.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(f)>=l&&m[0]),u[1]===!1&&(u[1]=Math.abs(r)>=d&&m[1])):(u[0]===!1&&(u[0]=Math.abs(f)>=l&&Math.sign(f)*l),u[1]===!1&&(u[1]=Math.abs(r)>=d&&Math.sign(r)*d)),n.intentional=u[0]!==!1||u[1]!==!1,!n.intentional)return;const b=[0,0];if(t.hasCustomTransform){const[g,V]=m;b[0]=u[0]!==!1?g-u[0]:0,b[1]=u[1]!==!1?V-u[1]:0}else b[0]=u[0]!==!1?f-u[0]:0,b[1]=u[1]!==!1?r-u[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(b);const E=n.offset,w=n._active&&!n._blocked||n.active;w&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=s[this.ingKey]=n._active,e&&(n.first&&("bounds"in t&&(n._bounds=ue(t.bounds,n)),this.setup&&this.setup()),n.movement=b,this.computeOffset()));const[_,P]=n.offset,[[S,I],[R,C]]=n._bounds;n.overflow=[_<S?-1:_>I?1:0,P<R?-1:P>C?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const T=n._active?t.rubberband||[0,0]:[0,0];if(n.offset=Qt(n._bounds,n.offset,T),n.delta=D.sub(n.offset,E),this.computeMovement(),w&&(!n.last||c>dn)){n.delta=D.sub(n.offset,E);const g=n.delta.map(Math.abs);D.addTo(n.distance,g),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&c>0&&(n.velocity=[g[0]/c,g[1]/c],n.timeDelta=c)}}emit(){const e=this.state,n=this.shared,t=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!t.triggerAllEvents)return;const s=this.handler(O(O(O({},n),e),{},{[this.aliasKey]:e.values}));s!==void 0&&(e.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function gn([o,e],n){const t=Math.abs(o),s=Math.abs(e);if(t>s&&t>n)return"x";if(s>t&&s>n)return"y"}class bn extends mn{constructor(...e){super(...e),k(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=D.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=D.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,t=this.config;if(!n.axis&&e){const s=typeof t.axisThreshold=="object"?t.axisThreshold[lt(e)]:t.axisThreshold;n.axis=gn(n._movement,s)}n._blocked=(t.lockDirection||!!t.axis)&&!n.axis||!!t.axis&&t.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const vn=o=>o,et=.15,ft={enabled(o=!0){return o},eventOptions(o,e,n){return O(O({},n.shared.eventOptions),o)},preventDefault(o=!1){return o},triggerAllEvents(o=!1){return o},rubberband(o=0){switch(o){case!0:return[et,et];case!1:return[0,0];default:return D.toVector(o)}},from(o){if(typeof o=="function")return o;if(o!=null)return D.toVector(o)},transform(o,e,n){const t=o||n.shared.transform;return this.hasCustomTransform=!!t,t||vn},threshold(o){return D.toVector(o,0)}},yn=0,J=O(O({},ft),{},{axis(o,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(o=yn){return o},bounds(o={}){if(typeof o=="function")return c=>J.bounds(o(c));if("current"in o)return()=>o.current;if(typeof HTMLElement=="function"&&o instanceof HTMLElement)return o;const{left:e=-1/0,right:n=1/0,top:t=-1/0,bottom:s=1/0}=o;return[[e,n],[t,s]]}}),tt={ArrowRight:(o,e=1)=>[o*e,0],ArrowLeft:(o,e=1)=>[-1*o*e,0],ArrowUp:(o,e=1)=>[0,-1*o*e],ArrowDown:(o,e=1)=>[0,o*e]};class En extends bn{constructor(...e){super(...e),k(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),t=e.currentTarget.getBoundingClientRect(),s={left:n.left-t.left+e.offset[0],right:n.right-t.right+e.offset[0],top:n.top-t.top+e.offset[1],bottom:n.bottom-t.bottom+e.offset[1]};e._bounds=J.bounds(s)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,t=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const s=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(s&&s.size>1&&t._pointerActive)&&(this.start(e),this.setupPointer(e),t._pointerId=ye(e),t._pointerActive=!0,this.computeValues(Qe(e)),this.computeInitial(),n.preventScrollAxis&&lt(e)!=="mouse"?(t._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,t=this.config;if(!n._pointerActive)return;const s=ye(e);if(n._pointerId!==void 0&&s!==n._pointerId)return;const c=Qe(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=D.sub(c,n._values),this.computeValues(c)),D.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(t.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===t.preventScrollAxis||t.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,t=this.config;if(!n._active||!n._pointerActive)return;const s=ye(e);if(n._pointerId!==void 0&&s!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[c,f]=n._distance;if(n.tap=c<=t.tapsThreshold&&f<=t.tapsThreshold,n.tap&&t.filterTaps)n._force=!0;else{const[r,l]=n._delta,[d,u]=n._movement,[m,b]=t.swipe.velocity,[E,w]=t.swipe.distance,_=t.swipe.duration;if(n.elapsedTime<_){const P=Math.abs(r/n.timeDelta),S=Math.abs(l/n.timeDelta);P>m&&Math.abs(d)>E&&(n.swipe[0]=Math.sign(r)),S>b&&Math.abs(u)>w&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,t=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,t,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,t,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,t,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,_n(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=tt[e.key];if(n){const t=this.state,s=e.shiftKey?10:e.altKey?.1:1;this.start(e),t._delta=n(this.config.keyboardDisplacement,s),t._keyboardActive=!0,D.addTo(t._movement,t._delta),this.compute(e),this.emit()}}keyUp(e){e.key in tt&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function _n(o){"persist"in o&&typeof o.persist=="function"&&o.persist()}const ee=typeof window<"u"&&window.document&&window.document.createElement;function ht(){return ee&&"ontouchstart"in window}function Tn(){return ht()||ee&&window.navigator.maxTouchPoints>1}function wn(){return ee&&"onpointerdown"in window}function Pn(){return ee&&"exitPointerLock"in window.document}function On(){try{return"constructor"in GestureEvent}catch{return!1}}const L={isBrowser:ee,gesture:On(),touch:ht(),touchscreen:Tn(),pointer:wn(),pointerLock:Pn()},Sn=250,xn=180,An=.5,Dn=50,Mn=250,kn=10,nt={mouse:0,touch:0,pen:8},In=O(O({},J),{},{device(o,e,{pointer:{touch:n=!1,lock:t=!1,mouse:s=!1}={}}){return this.pointerLock=t&&L.pointerLock,L.touch&&n?"touch":this.pointerLock?"mouse":L.pointer&&!s?"pointer":L.touch?"touch":"mouse"},preventScrollAxis(o,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&o?Sn:void 0,!(!L.touchscreen||n===!1))return o||(n!==void 0?"y":void 0)},pointerCapture(o,e,{pointer:{capture:n=!0,buttons:t=1,keys:s=!0}={}}){return this.pointerButtons=t,this.keys=s,!this.pointerLock&&this.device==="pointer"&&n},threshold(o,e,{filterTaps:n=!1,tapsThreshold:t=3,axis:s=void 0}){const c=D.toVector(o,n?t:s?1:0);return this.filterTaps=n,this.tapsThreshold=t,c},swipe({velocity:o=An,distance:e=Dn,duration:n=Mn}={}){return{velocity:this.transform(D.toVector(o)),distance:this.transform(D.toVector(e)),duration:n}},delay(o=0){switch(o){case!0:return xn;case!1:return 0;default:return o}},axisThreshold(o){return o?O(O({},nt),o):nt},keyboardDisplacement(o=kn){return o}});O(O({},ft),{},{device(o,e,{shared:n,pointer:{touch:t=!1}={}}){if(n.target&&!L.touch&&L.gesture)return"gesture";if(L.touch&&t)return"touch";if(L.touchscreen){if(L.pointer)return"pointer";if(L.touch)return"touch"}},bounds(o,e,{scaleBounds:n={},angleBounds:t={}}){const s=f=>{const r=Je(ue(n,f),{min:-1/0,max:1/0});return[r.min,r.max]},c=f=>{const r=Je(ue(t,f),{min:-1/0,max:1/0});return[r.min,r.max]};return typeof n!="function"&&typeof t!="function"?[s(),c()]:f=>[s(f),c(f)]},threshold(o,e,n){return this.lockDirection=n.axis==="lock",D.toVector(o,this.lockDirection?[.1,3]:0)},modifierKey(o){return o===void 0?"ctrlKey":o},pinchOnWheel(o=!0){return o}});O(O({},J),{},{mouseOnly:(o=!0)=>o});O(O({},J),{},{mouseOnly:(o=!0)=>o});const pt=new Map,_e=new Map;function Cn(o){pt.set(o.key,o.engine),_e.set(o.key,o.resolver)}const Ln={key:"drag",engine:En,resolver:In};function Rn(o,e){if(o==null)return{};var n={},t=Object.keys(o),s,c;for(c=0;c<t.length;c++)s=t[c],!(e.indexOf(s)>=0)&&(n[s]=o[s]);return n}function jn(o,e){if(o==null)return{};var n=Rn(o,e),t,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);for(s=0;s<c.length;s++)t=c[s],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(o,t)&&(n[t]=o[t])}return n}const Nn={target(o){if(o)return()=>"current"in o?o.current:o},enabled(o=!0){return o},window(o=L.isBrowser?window:void 0){return o},eventOptions({passive:o=!0,capture:e=!1}={}){return{passive:o,capture:e}},transform(o){return o}},zn=["target","eventOptions","window","enabled","transform"];function ae(o={},e){const n={};for(const[t,s]of Object.entries(e))switch(typeof s){case"function":n[t]=s.call(n,o[t],t,o);break;case"object":n[t]=ae(o[t],s);break;case"boolean":s&&(n[t]=o[t]);break}return n}function Un(o,e,n={}){const t=o,{target:s,eventOptions:c,window:f,enabled:r,transform:l}=t,d=jn(t,zn);if(n.shared=ae({target:s,eventOptions:c,window:f,enabled:r,transform:l},Nn),e){const u=_e.get(e);n[e]=ae(O({shared:n.shared},d),u)}else for(const u in d){const m=_e.get(u);m&&(n[u]=ae(O({shared:n.shared},d[u]),m))}return n}class dt{constructor(e,n){k(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,t,s,c){const f=this._listeners,r=an(n,t),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},d=O(O({},l),c);e.addEventListener(r,s,d);const u=()=>{e.removeEventListener(r,s,d),f.delete(u)};return f.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class Kn{constructor(){k(this,"_timeouts",new Map)}add(e,n,t=140,...s){this.remove(e),this._timeouts.set(e,window.setTimeout(n,t,...s))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class Yn{constructor(e){k(this,"gestures",new Set),k(this,"_targetEventStore",new dt(this)),k(this,"gestureEventStores",{}),k(this,"gestureTimeoutStores",{}),k(this,"handlers",{}),k(this,"config",{}),k(this,"pointerIds",new Set),k(this,"touchIds",new Set),k(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Fn(this,e)}setEventIds(e){if(fe(e))return this.touchIds=new Set(un(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=Un(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,t={};let s;if(!(n.target&&(s=n.target(),!s))){if(n.enabled){for(const f of this.gestures){const r=this.config[f],l=ot(t,r.eventOptions,!!s);if(r.enabled){const d=pt.get(f);new d(this,e,f).bind(l)}}const c=ot(t,n.eventOptions,!!s);for(const f in this.nativeHandlers)c(f,"",r=>this.nativeHandlers[f](O(O({},this.state.shared),{},{event:r,args:e})),void 0,!0)}for(const c in t)t[c]=pn(...t[c]);if(!s)return t;for(const c in t){const{device:f,capture:r,passive:l}=rn(c);this._targetEventStore.add(s,f,"",t[c],{capture:r,passive:l})}}}}function Z(o,e){o.gestures.add(e),o.gestureEventStores[e]=new dt(o,e),o.gestureTimeoutStores[e]=new Kn}function Fn(o,e){e.drag&&Z(o,"drag"),e.wheel&&Z(o,"wheel"),e.scroll&&Z(o,"scroll"),e.move&&Z(o,"move"),e.pinch&&Z(o,"pinch"),e.hover&&Z(o,"hover")}const ot=(o,e,n)=>(t,s,c,f={},r=!1)=>{var l,d;const u=(l=f.capture)!==null&&l!==void 0?l:e.capture,m=(d=f.passive)!==null&&d!==void 0?d:e.passive;let b=r?t:on(t,s,u);n&&m&&(b+="Passive"),o[b]=o[b]||[],o[b].push(c)};function Bn(o,e={},n,t){const s=ve.useMemo(()=>new Yn(o),[]);if(s.applyHandlers(o,t),s.applyConfig(e,n),ve.useEffect(s.effect.bind(s)),ve.useEffect(()=>s.clean.bind(s),[]),e.target===void 0)return s.bind.bind(s)}function co(o,e){return Cn(Ln),Bn({drag:o},e||{},"drag")}const Vn=o=>(e,n,t)=>{const s=t.subscribe;return t.subscribe=(f,r,l)=>{let d=f;if(r){const u=(l==null?void 0:l.equalityFn)||Object.is;let m=f(t.getState());d=b=>{const E=f(b);if(!u(m,E)){const w=m;r(m=E,w)}},l!=null&&l.fireImmediately&&r(m,m)}return s(d)},o(e,n,t)},mt=x.createContext(null);function lo({map:o,children:e,onChange:n,domElement:t}){const s=o.map(l=>l.name+l.keys).join("-"),c=x.useMemo(()=>Yt(Vn(()=>o.reduce((l,d)=>({...l,[d.name]:!1}),{}))),[s]),f=x.useMemo(()=>[c.subscribe,c.getState,c],[s]),r=c.setState;return x.useEffect(()=>{const d=o.map(({name:E,keys:w,up:_})=>({keys:w,up:_,fn:P=>{r({[E]:P}),n&&n(E,P,f[1]())}})).reduce((E,{keys:w,fn:_,up:P=!0})=>(w.forEach(S=>E[S]={fn:_,pressed:!1,up:P}),E),{}),u=({key:E,code:w})=>{const _=d[E]||d[w];if(!_)return;const{fn:P,pressed:S,up:I}=_;_.pressed=!0,(I||!S)&&P(!0)},m=({key:E,code:w})=>{const _=d[E]||d[w];if(!_)return;const{fn:P,up:S}=_;_.pressed=!1,S&&P(!1)},b=t||window;return b.addEventListener("keydown",u,{passive:!0}),b.addEventListener("keyup",m,{passive:!0}),()=>{b.removeEventListener("keydown",u),b.removeEventListener("keyup",m)}},[t,s]),x.createElement(mt.Provider,{value:f,children:e})}function uo(o){const[e,n,t]=x.useContext(mt);return[e,n]}const Hn=parseInt(Bt.replace(/\D+/g,""));var Wn=Object.defineProperty,Xn=(o,e,n)=>e in o?Wn(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,gt=(o,e,n)=>(Xn(o,typeof e!="symbol"?e+"":e,n),n);const ce={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new M},up:{value:new M(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${Hn>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},bt=new rt({name:"SkyShader",fragmentShader:ce.fragmentShader,vertexShader:ce.vertexShader,uniforms:at.clone(ce.uniforms),side:Vt,depthWrite:!1});let Pe=class extends Ht{constructor(){super(new Wt(1,1,1),bt)}};gt(Pe,"SkyShader",ce);gt(Pe,"material",bt);var Zn=Object.defineProperty,Gn=(o,e,n)=>e in o?Zn(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,h=(o,e,n)=>(Gn(o,typeof e!="symbol"?e+"":e,n),n);const re=new Xt,it=new Zt,qn=Math.cos(70*(Math.PI/180)),st=(o,e)=>(o%e+e)%e;let $n=class extends Gt{constructor(e,n){super(),h(this,"object"),h(this,"domElement"),h(this,"enabled",!0),h(this,"target",new M),h(this,"minDistance",0),h(this,"maxDistance",1/0),h(this,"minZoom",0),h(this,"maxZoom",1/0),h(this,"minPolarAngle",0),h(this,"maxPolarAngle",Math.PI),h(this,"minAzimuthAngle",-1/0),h(this,"maxAzimuthAngle",1/0),h(this,"enableDamping",!1),h(this,"dampingFactor",.05),h(this,"enableZoom",!0),h(this,"zoomSpeed",1),h(this,"enableRotate",!0),h(this,"rotateSpeed",1),h(this,"enablePan",!0),h(this,"panSpeed",1),h(this,"screenSpacePanning",!0),h(this,"keyPanSpeed",7),h(this,"zoomToCursor",!1),h(this,"autoRotate",!1),h(this,"autoRotateSpeed",2),h(this,"reverseOrbit",!1),h(this,"reverseHorizontalOrbit",!1),h(this,"reverseVerticalOrbit",!1),h(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),h(this,"mouseButtons",{LEFT:W.ROTATE,MIDDLE:W.DOLLY,RIGHT:W.PAN}),h(this,"touches",{ONE:X.ROTATE,TWO:X.DOLLY_PAN}),h(this,"target0"),h(this,"position0"),h(this,"zoom0"),h(this,"_domElementKeyEvents",null),h(this,"getPolarAngle"),h(this,"getAzimuthalAngle"),h(this,"setPolarAngle"),h(this,"setAzimuthalAngle"),h(this,"getDistance"),h(this,"listenToKeyEvents"),h(this,"stopListenToKeyEvents"),h(this,"saveState"),h(this,"reset"),h(this,"update"),h(this,"connect"),h(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=i=>{let a=st(i,2*Math.PI),p=u.phi;p<0&&(p+=2*Math.PI),a<0&&(a+=2*Math.PI);let v=Math.abs(a-p);2*Math.PI-v<v&&(a<p?a+=2*Math.PI:p+=2*Math.PI),m.phi=a-p,t.update()},this.setAzimuthalAngle=i=>{let a=st(i,2*Math.PI),p=u.theta;p<0&&(p+=2*Math.PI),a<0&&(a+=2*Math.PI);let v=Math.abs(a-p);2*Math.PI-v<v&&(a<p?a+=2*Math.PI:p+=2*Math.PI),m.theta=a-p,t.update()},this.getDistance=()=>t.object.position.distanceTo(t.target),this.listenToKeyEvents=i=>{i.addEventListener("keydown",ge),this._domElementKeyEvents=i},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ge),this._domElementKeyEvents=null},this.saveState=()=>{t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=()=>{t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(s),t.update(),l=r.NONE},this.update=(()=>{const i=new M,a=new M(0,1,0),p=new Be().setFromUnitVectors(e.up,a),v=p.clone().invert(),A=new M,U=new Be,B=2*Math.PI;return function(){const Fe=t.object.position;p.setFromUnitVectors(e.up,a),v.copy(p).invert(),i.copy(Fe).sub(t.target),i.applyQuaternion(p),u.setFromVector3(i),t.autoRotate&&l===r.NONE&&he(Tt()),t.enableDamping?(u.theta+=m.theta*t.dampingFactor,u.phi+=m.phi*t.dampingFactor):(u.theta+=m.theta,u.phi+=m.phi);let K=t.minAzimuthAngle,Y=t.maxAzimuthAngle;isFinite(K)&&isFinite(Y)&&(K<-Math.PI?K+=B:K>Math.PI&&(K-=B),Y<-Math.PI?Y+=B:Y>Math.PI&&(Y-=B),K<=Y?u.theta=Math.max(K,Math.min(Y,u.theta)):u.theta=u.theta>(K+Y)/2?Math.max(K,u.theta):Math.min(Y,u.theta)),u.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,u.phi)),u.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(E,t.dampingFactor):t.target.add(E),t.zoomToCursor&&z||t.object.isOrthographicCamera?u.radius=de(u.radius):u.radius=de(u.radius*b),i.setFromSpherical(u),i.applyQuaternion(v),Fe.copy(t.target).add(i),t.object.matrixAutoUpdate||t.object.updateMatrix(),t.object.lookAt(t.target),t.enableDamping===!0?(m.theta*=1-t.dampingFactor,m.phi*=1-t.dampingFactor,E.multiplyScalar(1-t.dampingFactor)):(m.set(0,0,0),E.set(0,0,0));let q=!1;if(t.zoomToCursor&&z){let $=null;if(t.object instanceof ie&&t.object.isPerspectiveCamera){const Q=i.length();$=de(Q*b);const oe=Q-$;t.object.position.addScaledVector(V,oe),t.object.updateMatrixWorld()}else if(t.object.isOrthographicCamera){const Q=new M(j.x,j.y,0);Q.unproject(t.object),t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/b)),t.object.updateProjectionMatrix(),q=!0;const oe=new M(j.x,j.y,0);oe.unproject(t.object),t.object.position.sub(oe).add(Q),t.object.updateMatrixWorld(),$=i.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;$!==null&&(t.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar($).add(t.object.position):(re.origin.copy(t.object.position),re.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(re.direction))<qn?e.lookAt(t.target):(it.setFromNormalAndCoplanarPoint(t.object.up,t.target),re.intersectPlane(it,t.target))))}else t.object instanceof se&&t.object.isOrthographicCamera&&(q=b!==1,q&&(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/b)),t.object.updateProjectionMatrix()));return b=1,z=!1,q||A.distanceToSquared(t.object.position)>d||8*(1-U.dot(t.object.quaternion))>d?(t.dispatchEvent(s),A.copy(t.object.position),U.copy(t.object.quaternion),q=!1,!0):!1}})(),this.connect=i=>{i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),t.domElement=i,t.domElement.style.touchAction="none",t.domElement.addEventListener("contextmenu",Ke),t.domElement.addEventListener("pointerdown",ze),t.domElement.addEventListener("pointercancel",G),t.domElement.addEventListener("wheel",Ue)},this.dispose=()=>{var i,a,p,v,A,U;t.domElement&&(t.domElement.style.touchAction="auto"),(i=t.domElement)==null||i.removeEventListener("contextmenu",Ke),(a=t.domElement)==null||a.removeEventListener("pointerdown",ze),(p=t.domElement)==null||p.removeEventListener("pointercancel",G),(v=t.domElement)==null||v.removeEventListener("wheel",Ue),(A=t.domElement)==null||A.ownerDocument.removeEventListener("pointermove",me),(U=t.domElement)==null||U.ownerDocument.removeEventListener("pointerup",G),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",ge)};const t=this,s={type:"change"},c={type:"start"},f={type:"end"},r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=r.NONE;const d=1e-6,u=new Ve,m=new Ve;let b=1;const E=new M,w=new N,_=new N,P=new N,S=new N,I=new N,R=new N,C=new N,T=new N,g=new N,V=new M,j=new N;let z=!1;const y=[],te={};function Tt(){return 2*Math.PI/60/60*t.autoRotateSpeed}function ne(){return Math.pow(.95,t.zoomSpeed)}function he(i){t.reverseOrbit||t.reverseHorizontalOrbit?m.theta+=i:m.theta-=i}function Oe(i){t.reverseOrbit||t.reverseVerticalOrbit?m.phi+=i:m.phi-=i}const Se=(()=>{const i=new M;return function(p,v){i.setFromMatrixColumn(v,0),i.multiplyScalar(-p),E.add(i)}})(),xe=(()=>{const i=new M;return function(p,v){t.screenSpacePanning===!0?i.setFromMatrixColumn(v,1):(i.setFromMatrixColumn(v,0),i.crossVectors(t.object.up,i)),i.multiplyScalar(p),E.add(i)}})(),H=(()=>{const i=new M;return function(p,v){const A=t.domElement;if(A&&t.object instanceof ie&&t.object.isPerspectiveCamera){const U=t.object.position;i.copy(U).sub(t.target);let B=i.length();B*=Math.tan(t.object.fov/2*Math.PI/180),Se(2*p*B/A.clientHeight,t.object.matrix),xe(2*v*B/A.clientHeight,t.object.matrix)}else A&&t.object instanceof se&&t.object.isOrthographicCamera?(Se(p*(t.object.right-t.object.left)/t.object.zoom/A.clientWidth,t.object.matrix),xe(v*(t.object.top-t.object.bottom)/t.object.zoom/A.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}})();function pe(i){t.object instanceof ie&&t.object.isPerspectiveCamera||t.object instanceof se&&t.object.isOrthographicCamera?b/=i:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function Ae(i){t.object instanceof ie&&t.object.isPerspectiveCamera||t.object instanceof se&&t.object.isOrthographicCamera?b*=i:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function De(i){if(!t.zoomToCursor||!t.domElement)return;z=!0;const a=t.domElement.getBoundingClientRect(),p=i.clientX-a.left,v=i.clientY-a.top,A=a.width,U=a.height;j.x=p/A*2-1,j.y=-(v/U)*2+1,V.set(j.x,j.y,1).unproject(t.object).sub(t.object.position).normalize()}function de(i){return Math.max(t.minDistance,Math.min(t.maxDistance,i))}function Me(i){w.set(i.clientX,i.clientY)}function wt(i){De(i),C.set(i.clientX,i.clientY)}function ke(i){S.set(i.clientX,i.clientY)}function Pt(i){_.set(i.clientX,i.clientY),P.subVectors(_,w).multiplyScalar(t.rotateSpeed);const a=t.domElement;a&&(he(2*Math.PI*P.x/a.clientHeight),Oe(2*Math.PI*P.y/a.clientHeight)),w.copy(_),t.update()}function Ot(i){T.set(i.clientX,i.clientY),g.subVectors(T,C),g.y>0?pe(ne()):g.y<0&&Ae(ne()),C.copy(T),t.update()}function St(i){I.set(i.clientX,i.clientY),R.subVectors(I,S).multiplyScalar(t.panSpeed),H(R.x,R.y),S.copy(I),t.update()}function xt(i){De(i),i.deltaY<0?Ae(ne()):i.deltaY>0&&pe(ne()),t.update()}function At(i){let a=!1;switch(i.code){case t.keys.UP:H(0,t.keyPanSpeed),a=!0;break;case t.keys.BOTTOM:H(0,-t.keyPanSpeed),a=!0;break;case t.keys.LEFT:H(t.keyPanSpeed,0),a=!0;break;case t.keys.RIGHT:H(-t.keyPanSpeed,0),a=!0;break}a&&(i.preventDefault(),t.update())}function Ie(){if(y.length==1)w.set(y[0].pageX,y[0].pageY);else{const i=.5*(y[0].pageX+y[1].pageX),a=.5*(y[0].pageY+y[1].pageY);w.set(i,a)}}function Ce(){if(y.length==1)S.set(y[0].pageX,y[0].pageY);else{const i=.5*(y[0].pageX+y[1].pageX),a=.5*(y[0].pageY+y[1].pageY);S.set(i,a)}}function Le(){const i=y[0].pageX-y[1].pageX,a=y[0].pageY-y[1].pageY,p=Math.sqrt(i*i+a*a);C.set(0,p)}function Dt(){t.enableZoom&&Le(),t.enablePan&&Ce()}function Mt(){t.enableZoom&&Le(),t.enableRotate&&Ie()}function Re(i){if(y.length==1)_.set(i.pageX,i.pageY);else{const p=be(i),v=.5*(i.pageX+p.x),A=.5*(i.pageY+p.y);_.set(v,A)}P.subVectors(_,w).multiplyScalar(t.rotateSpeed);const a=t.domElement;a&&(he(2*Math.PI*P.x/a.clientHeight),Oe(2*Math.PI*P.y/a.clientHeight)),w.copy(_)}function je(i){if(y.length==1)I.set(i.pageX,i.pageY);else{const a=be(i),p=.5*(i.pageX+a.x),v=.5*(i.pageY+a.y);I.set(p,v)}R.subVectors(I,S).multiplyScalar(t.panSpeed),H(R.x,R.y),S.copy(I)}function Ne(i){const a=be(i),p=i.pageX-a.x,v=i.pageY-a.y,A=Math.sqrt(p*p+v*v);T.set(0,A),g.set(0,Math.pow(T.y/C.y,t.zoomSpeed)),pe(g.y),C.copy(T)}function kt(i){t.enableZoom&&Ne(i),t.enablePan&&je(i)}function It(i){t.enableZoom&&Ne(i),t.enableRotate&&Re(i)}function ze(i){var a,p;t.enabled!==!1&&(y.length===0&&((a=t.domElement)==null||a.ownerDocument.addEventListener("pointermove",me),(p=t.domElement)==null||p.ownerDocument.addEventListener("pointerup",G)),Nt(i),i.pointerType==="touch"?Rt(i):Ct(i))}function me(i){t.enabled!==!1&&(i.pointerType==="touch"?jt(i):Lt(i))}function G(i){var a,p,v;zt(i),y.length===0&&((a=t.domElement)==null||a.releasePointerCapture(i.pointerId),(p=t.domElement)==null||p.ownerDocument.removeEventListener("pointermove",me),(v=t.domElement)==null||v.ownerDocument.removeEventListener("pointerup",G)),t.dispatchEvent(f),l=r.NONE}function Ct(i){let a;switch(i.button){case 0:a=t.mouseButtons.LEFT;break;case 1:a=t.mouseButtons.MIDDLE;break;case 2:a=t.mouseButtons.RIGHT;break;default:a=-1}switch(a){case W.DOLLY:if(t.enableZoom===!1)return;wt(i),l=r.DOLLY;break;case W.ROTATE:if(i.ctrlKey||i.metaKey||i.shiftKey){if(t.enablePan===!1)return;ke(i),l=r.PAN}else{if(t.enableRotate===!1)return;Me(i),l=r.ROTATE}break;case W.PAN:if(i.ctrlKey||i.metaKey||i.shiftKey){if(t.enableRotate===!1)return;Me(i),l=r.ROTATE}else{if(t.enablePan===!1)return;ke(i),l=r.PAN}break;default:l=r.NONE}l!==r.NONE&&t.dispatchEvent(c)}function Lt(i){if(t.enabled!==!1)switch(l){case r.ROTATE:if(t.enableRotate===!1)return;Pt(i);break;case r.DOLLY:if(t.enableZoom===!1)return;Ot(i);break;case r.PAN:if(t.enablePan===!1)return;St(i);break}}function Ue(i){t.enabled===!1||t.enableZoom===!1||l!==r.NONE&&l!==r.ROTATE||(i.preventDefault(),t.dispatchEvent(c),xt(i),t.dispatchEvent(f))}function ge(i){t.enabled===!1||t.enablePan===!1||At(i)}function Rt(i){switch(Ye(i),y.length){case 1:switch(t.touches.ONE){case X.ROTATE:if(t.enableRotate===!1)return;Ie(),l=r.TOUCH_ROTATE;break;case X.PAN:if(t.enablePan===!1)return;Ce(),l=r.TOUCH_PAN;break;default:l=r.NONE}break;case 2:switch(t.touches.TWO){case X.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Dt(),l=r.TOUCH_DOLLY_PAN;break;case X.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Mt(),l=r.TOUCH_DOLLY_ROTATE;break;default:l=r.NONE}break;default:l=r.NONE}l!==r.NONE&&t.dispatchEvent(c)}function jt(i){switch(Ye(i),l){case r.TOUCH_ROTATE:if(t.enableRotate===!1)return;Re(i),t.update();break;case r.TOUCH_PAN:if(t.enablePan===!1)return;je(i),t.update();break;case r.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;kt(i),t.update();break;case r.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;It(i),t.update();break;default:l=r.NONE}}function Ke(i){t.enabled!==!1&&i.preventDefault()}function Nt(i){y.push(i)}function zt(i){delete te[i.pointerId];for(let a=0;a<y.length;a++)if(y[a].pointerId==i.pointerId){y.splice(a,1);return}}function Ye(i){let a=te[i.pointerId];a===void 0&&(a=new N,te[i.pointerId]=a),a.set(i.pageX,i.pageY)}function be(i){const a=i.pointerId===y[0].pointerId?y[1]:y[0];return te[a.pointerId]}n!==void 0&&this.connect(n),this.update()}};function po(o,e){if(Object.is(o,e))return!0;if(typeof o!="object"||o===null||typeof e!="object"||e===null)return!1;const n=Object.keys(o);if(n.length!==Object.keys(e).length)return!1;for(let t=0;t<n.length;t++)if(!Object.prototype.hasOwnProperty.call(e,n[t])||!Object.is(o[n[t]],e[n[t]]))return!1;return!0}function go(o,e,n,t){const s=class extends rt{constructor(f={}){const r=Object.entries(o);super({uniforms:r.reduce((l,[d,u])=>{const m=at.clone({[d]:{value:u}});return{...l,...m}},{}),vertexShader:e,fragmentShader:n}),this.key="",r.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:d=>this.uniforms[l].value=d})),Object.assign(this,f)}};return s.key=qt.generateUUID(),s}const Ee=o=>o===Object(o)&&!Array.isArray(o)&&typeof o!="function";function vt(o,e){const n=F(c=>c.gl),t=Te(we,Ee(o)?Object.values(o):o);return x.useLayoutEffect(()=>{e==null||e(t)},[e]),x.useEffect(()=>{if("initTexture"in n){let c=[];Array.isArray(t)?c=t:t instanceof He?c=[t]:Ee(t)&&(c=Object.values(t)),c.forEach(f=>{f instanceof He&&n.initTexture(f)})}},[n,t]),x.useMemo(()=>{if(Ee(o)){const c={};let f=0;for(const r in o)c[r]=t[f++];return c}else return t},[o,t])}vt.preload=o=>Te.preload(we,o);vt.clear=o=>Te.clear(we,o);const bo=x.forwardRef(({makeDefault:o,camera:e,regress:n,domElement:t,enableDamping:s=!0,keyEvents:c=!1,onChange:f,onStart:r,onEnd:l,...d},u)=>{const m=F(g=>g.invalidate),b=F(g=>g.camera),E=F(g=>g.gl),w=F(g=>g.events),_=F(g=>g.setEvents),P=F(g=>g.set),S=F(g=>g.get),I=F(g=>g.performance),R=e||b,C=t||w.connected||E.domElement,T=x.useMemo(()=>new $n(R),[R]);return Ft(()=>{T.enabled&&T.update()},-1),x.useEffect(()=>(c&&T.connect(c===!0?C:c),T.connect(C),()=>void T.dispose()),[c,C,n,T,m]),x.useEffect(()=>{const g=z=>{m(),n&&I.regress(),f&&f(z)},V=z=>{r&&r(z)},j=z=>{l&&l(z)};return T.addEventListener("change",g),T.addEventListener("start",V),T.addEventListener("end",j),()=>{T.removeEventListener("start",V),T.removeEventListener("end",j),T.removeEventListener("change",g)}},[f,r,l,T,m,_]),x.useEffect(()=>{if(o){const g=S().controls;return P({controls:T}),()=>P({controls:g})}},[o,T]),x.createElement("primitive",le({ref:u,object:T,enableDamping:s},d))});var yt={exports:{}},Qn="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Jn=Qn,eo=Jn;function Et(){}function _t(){}_t.resetWarningCache=Et;var to=function(){function o(t,s,c,f,r,l){if(l!==eo){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}o.isRequired=o;function e(){return o}var n={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:e,element:o,elementType:o,instanceOf:e,node:o,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:_t,resetWarningCache:Et};return n.PropTypes=n,n};yt.exports=to();var no=yt.exports;const vo=Kt(no);function oo(o,e,n=new M){const t=Math.PI*(o-.5),s=2*Math.PI*(e-.5);return n.x=Math.cos(s),n.y=Math.sin(t),n.z=Math.sin(s),n}const yo=x.forwardRef(({inclination:o=.6,azimuth:e=.1,distance:n=1e3,mieCoefficient:t=.005,mieDirectionalG:s=.8,rayleigh:c=.5,turbidity:f=10,sunPosition:r=oo(o,e),...l},d)=>{const u=x.useMemo(()=>new M().setScalar(n),[n]),[m]=x.useState(()=>new Pe);return x.createElement("primitive",le({object:m,ref:d,"material-uniforms-mieCoefficient-value":t,"material-uniforms-mieDirectionalG-value":s,"material-uniforms-rayleigh-value":c,"material-uniforms-sunPosition-value":r,"material-uniforms-turbidity-value":f,scale:u},l))});export{lo as K,bo as O,vo as P,yo as S,le as _,Vn as a,go as b,vt as c,uo as d,We as e,po as s,co as u};
